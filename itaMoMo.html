<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>itaMoMo</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/shop-item.css" rel="stylesheet">

    <link href="css/restaurant.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

</head>

<body>

    <!-- Navigation -->
    <div id="header"></div>
    <!-- Page Content -->
    <div class="container">

        <div class="row">

            <div class="col-lg-3">
                <h1 id="r-name" class="my-4"></h1>
                <div class="list-group">
                    <a id="infobtn" name="info" class="list-group-item active btn-primary">Information</a>
                    <a id="meunsbtn" name="meuns" class="list-group-item">Meuns</a>
                    <a id="branchesbtn" name="branches" class="list-group-item">Branches</a>
                </div>
            </div>
            <!-- /.col-lg-3 -->

            <div class="col-lg-9">
                <div id="info" class="view">

                    <!-- /.card -->

                    <div class="card card-outline-secondary my-4">
                        <div class="card-header">
                            Reviews
                        </div>
                        <div class="card-body">
                            <div class="comments">
                                <p><span class="text-warning">&#9733; &#9733; &#9733; &#9733; &#9734;</span> 4.0 stars
                                </p>
                                <hr>
                                <p>The ribs are decent, with bbq sauce and fries for the sides. But guys never ever go for the churros as there’re no flour in the middle but only the fried skin!! There’re four churros and I only ate half of a churro. It’s
                                    disappointing!
                                </p>
                                <small class="text-muted">Posted by Anonymous</small>
                                <hr>
                                <p>Here is the Summer Tea Set ☕️by Espuma. To be honest, I am a bit disappointed for this tea set. Although it looked and presented well( with music as background when you opened the lunch box) , yet, the taste of the cake
                                    and desserts weren’t really good. It’s more like a piece of kindergarten art work instead of desserts.
                                </p>
                                <small class="text-muted">Posted by Anonymous</small>
                                <hr>
                                <p>It’s a applewood smoked huge free range chicken! Not kidding, the size of the chicken is really huge! I thought we couldn’t finish it, but it was so tasty we finished all! The chicken meat is so soft and fully flavoured!
                                    Even the chicken breast meat is soft! The flavour is rich in taste but not salty!
                                </p>
                                <small class="text-muted">Posted by Anonymous</small>
                            </div>
                            <hr>
                            <button id="leaveReview" class="btn btn-success">Leave a Review</button>
                            <br />
                            <br />
                            <div id="addReview" class="my-2">
                                <label class='inputlbl'>Your Review</label><textarea class='form-control' row='4'></textarea><br />
                                <div class='right'>
                                    <input class='btn btn-outline-success' style='margin-right: 10px;' id='save' type='submit' value='Save'>
                                    <input class='btn btn-outline-danger' id='reset' type='reset' value='Cancel'>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /.card -->

                </div>
                <div id="meuns" class="view">
                    <div class="card mt-4">
                        <div class="card-header">
                            <b>Meun</b>
                        </div>
                        <div class="card-body">
                            <div id="menu"></div>
                        </div>
                    </div>
                    <div class="card mt-4">
                        <div class="card-header">
                            <b>Take-Away Meun</b>
                        </div>
                        <div class="card-body">
                            <div id="tmenu"></div>
                        </div>
                    </div>
                </div>
                <div id="branches" class="view"></div>
                <!-- /.col-lg-9 -->

            </div>
        </div>

    </div>
    <!-- /.container -->

    <!-- Footer -->
    <div id="footer"></div>

    <!-- Bootstrap core JavaScript -->
    <script src="jquery/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/render.js"></script>
    <script src="js/restaurant.js"></script>
    <script>
        const r = {
            id: "1001"
        };
        $(document).ready(function() {
            render.site.load();
            $.getJSON("data/restaurant.json", function(data) {
                const intro = render.card.create.el();
                const info = data.filter(v => (v.id == r.id))[0];
                $("#r-name").text(info.name)
                render.card.set.title(intro, "Information of Restaurant");
                render.card.set.content(intro, "<p><h5><label class='inputlbl'>Type : </label>  " + info.type + "</h5></p>" + "<label class='inputlbl'>Introduction:" + "</label>" + "<p>" + info.introduction + "</p>");
                render.card.set.footer(intro, "");
                intro.prepend($("<img src='image/" + info.banner + "' class='card-img-top img-fluid'>"));
                intro.append($("<button class='btn heartbtn'>").html("<span class='heart' id='imgheart' aria-hidden='true'></span><label id='lblheart'>Add to My Favorite</label>").click(function() {
                    // const mb = $("<div class=\"animate-fading alert alert-success\" role=\"alert\" style='position: fixed;bottom:3rem;'>");
                    // mb.text("Added to My Favorite");
                    // $("body").append(mb)
                    // setTimeout(() => {
                    //     $(".alert").remove()
                    // }, 10000);
                    $("#imgheart").animate({
                        opacity: 1
                    }, 1000);
                    $("#lblheart").text("Added to My Favorite!!");
                    $("#lblheart").animate({
                        opacity: 1
                    }, 1000);
                }))
                intro.addClass("my-5");
                $("#info").prepend(intro);
                const menu = render.table.create.el();
                const tmenu = render.table.create.el();
                const m = data.filter(v => (v.id == r.id))[0].menu;
                const title = ["Name", "Type"];
                const today = new Date();
                render.table.set.title(menu, title);
                render.table.set.title(tmenu, title);
                render.table.set.content(menu, m.filter(v => (today >= new Date(v.date.start) && today <= new Date(v.date.end))).map(v => [v.name, v.type]));
                render.table.set.content(tmenu, m.filter(v => (v.takeaway)).map(v => [v.name, v.type]));
                $("#menu").append(menu);
                $("#tmenu").append(tmenu);
                const b = data.filter(v => (v.id == r.id))[0].branch;
                for (i = 0; i < b.length; i++) {
                    const card = render.card.create.el();
                    render.card.set.title(card, b[i].location.locat);
                    render.card.set.content(card, "<p>Location : " + b[i].location.string + "<p>" + "<p>Phone Number : " + b[i].location.tel + "</p>" + "<p>How To Go : " + b[i].location.howToGo + "</p>")
                    render.card.set.footer(card, "<a class='btn btn-primary' href='" + b[i].location.map + "'>View Google Map</a>")
                    card.addClass("my-5")
                    $("#branches").append(card)
                }
                $([...$("#menu tr")].filter(v => ($($(v).find("td")[1]).text() == "Seasonal"))).addClass("seaconal animate-seaconal");
            })
        })
    </script>
</body>

</html>